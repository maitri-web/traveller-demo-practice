(()=>{var t={757:(t,e,n)=>{t.exports=n(666)},666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?v:h,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=v,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d="suspendedStart",h="suspendedYield",p="executing",v="completed",f={};function m(){}function g(){}function w(){}var y={};c(y,i,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(T([])));b&&b!==n&&r.call(b,i)&&(y=b);var k=w.prototype=m.prototype=Object.create(y);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function T(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:j}}function j(){return{value:e,done:!0}}return g.prototype=w,c(k,"constructor",w),c(w,"constructor",g),g.displayName=c(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},S(x.prototype),c(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(k),c(k,s,"Generator"),c(k,i,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function e(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function s(e){t(a,o,i,s,c,"next",e)}function c(e){t(a,o,i,s,c,"throw",e)}s(void 0)}))}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n(757),c=n.n(s);const u="amEventSid",l="amEventSid_cookieless",d="_recordTime",h="amUtmSource",p="amUtmMedium",v="amUtmContent",f="amUtmCampaign",m="amUtmSCP",g="_ama",w="_am_id",y="/";function _(t){let e=[];try{e=document.cookie.split(";")}catch(t){}const n=`${t}=`;for(let t of e)if(t=t.trim(),t.substring(0,n.length)===n)return t.substring(n.length);return""}function b(t,e,n){let r=`${t}=${e}`;void 0!==(null==n?void 0:n.path)&&(r+=`;path=${n.path}`),void 0!==(null==n?void 0:n.domain)&&(r+=`;domain=${n.domain}`),void 0!==(null==n?void 0:n.maxAge)&&(r+=`;max-age=${n.maxAge}`),(null==n?void 0:n.secure)&&(r+=";secure"),void 0!==(null==n?void 0:n.sameSite)&&(r+=`;samesite=${n.sameSite}`);try{document.cookie=r}catch(t){}}function k(t,e){(function(t){let e=[];try{e=document.cookie.split(";")}catch(t){}const n=`${t}=`;for(let t of e)if(t=t.trim(),t.substring(0,n.length)===n)return!0;return!1})(t)&&b(t,"deleted",Object.assign({},e,{expires:new Date("1970-01-01")}))}var S;function x(){let t="";try{t=URL.createObjectURL(new Blob)}catch(t){}const e=t.toString();try{URL.revokeObjectURL(t)}catch(t){}const n=e.split(/[:/]/g).pop();return n?n.toLowerCase():function(){let t=(new Date).getTime(),e="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){let r=16*Math.random();return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(e+r)%16|0,e=Math.floor(e/16)),("x"===n?r:3&r|8).toString(16)}))}()}function E(t,e){return Math.floor(Math.random()*(e-t)+t)}!function(t){t.click="click",t.impr="impr",t.page_enter="page_enter",t.page_leave="page_leave",t.modal_view="modal_view",t.modal_close="modal_close",t.add_to_cart="add_to_cart",t.cart_updated="cart_updated",t.remove_from_cart="remove_from_cart",t.view_item="view_item",t.click_item="click_item",t.checkout="checkout",t.purchase="purchase",t.subscribe="subscribe",t.get_coupon="get_coupon",t.search="search"}(S||(S={}));var L,C;function O(t,e){var n;const r=null!==(n=null==e?void 0:e.expires)&&void 0!==n?n:1800,o=Date.now();let i=sessionStorage.getItem(t);const a=Number(sessionStorage.getItem(t+d));return i&&(!1===r||o-a<r)||(i=x(),sessionStorage.setItem(t,i),sessionStorage.setItem(t+d,`${o}`)),i}function T(){return t=this,e=void 0,r=function*(){return new Promise((t=>{"complete"===document.readyState?t(!0):document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&t(!0)}))}))},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}function j(t){for(const e in t)void 0!==t[e]&&null!==t[e]||delete t[e];return t}function q(t){return!t||isNaN(parseFloat(t))?0:Math.round(100*parseFloat(t))}function I(t,e){localStorage.setItem(t,JSON.stringify(e))}function P(t){const e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(t){return null}return null}function R(t){localStorage.removeItem(t)}function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}!function(t){t.Home="P00001",t.Collections="P00002",t.SearchResults="P00003",t.Product="P00004",t.Cart="P00005",t.ThankYou="P00006",t.Checkout="P00007"}(L||(L={})),function(t){t.cart="/cart.js",t.cartCheckout="/cart"}(C||(C={}));const A=[{page_type:"home",regexp:/^\/$/,page_sn:L.Home},{page_type:"collections",regexp:/^\/collections\/((?!products\/).)*$/,page_sn:L.Collections},{page_type:"collection",regexp:/\/collections\/((?!products\/).)*$/,page_sn:L.Collections},{page_type:"searchresults",regexp:/.*a?\/search$/,page_sn:L.SearchResults},{page_type:"product",regexp:/^\/products\/[^/]+$/,page_sn:L.Product},{page_type:"",regexp:/^\/cart$/,page_sn:L.Cart},{page_type:"",regexp:/.*\/checkouts\/.+thank_you/,page_sn:L.ThankYou}];function M(){var t,e,n;const r=window.location.pathname,o=null===(n=null===(e=null===(t=window.ShopifyAnalytics)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.page)||void 0===n?void 0:n.pageType;return A.find((t=>t.regexp.test(r)||o===t.page_type))||{page_type:o,regexp:/.+/,page_sn:""}}function $(){var t,e,n;const r=(null===(n=null===(e=null===(t=window.ShopifyAnalytics)||void 0===t?void 0:t.meta)||void 0===e?void 0:e.page)||void 0===n?void 0:n.customerId)||"";return{userId:r,isLogged:Boolean(r)}}var K;function N(){return"Shopify"in window}!function(t){t.woo="woocommerce",t.shopify="shopify"}(K||(K={}));const Q=function(){return"woocommerce_params"in window},U=()=>{var t,e;const{hostname:n}=window.location;let r="";return N()&&(r=(null===(e=null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.shop)||void 0===e?void 0:e.split(".")[0])||n.includes("myshopify.com")&&n.split(".")[0]),Q(),r};function B(){var t,e,n,r,o;return e=this,n=void 0,o=function*(){return N()?M().page_sn===L.ThankYou||("function"==typeof(null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.loadFeatures)?new Promise(((t,e)=>{window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],(function(n){n?e(n):t(F())}))})):F()):!(!document.querySelector('meta[name="as-btp"][content="true"]')&&"object"!=typeof window.AM_CONSENT_SDK)||new Promise(((t,e)=>{fetch(function(t){if(t||(t="production"),!t)throw new Error("APP_ENV not found");const e={testing:"bff-api.aftership.io",staging:"bff-api.aftership.com",production:"bff-api.aftership.com"};return`https://${e[t||"testing"]||e.testing}/business/compliance/v1/requirement`}(),{}).then((t=>t.json())).then((e=>{const n=e.data.ccpa,r=e.data.gdpr,o=e.data.uk_gdpr;t(!(n||r||o))})).catch((t=>{e(t)}))}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))}function F(){var t,e,n,r;let o=!1;"function"==typeof(null===(e=null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.customerPrivacy)||void 0===e?void 0:e.userDataCanBeSold)&&(o=window.Shopify.customerPrivacy.userDataCanBeSold());let i=!1;return"function"==typeof(null===(r=null===(n=null===window||void 0===window?void 0:window.Shopify)||void 0===n?void 0:n.customerPrivacy)||void 0===r?void 0:r.userCanBeTracked)&&(i=window.Shopify.customerPrivacy.userCanBeTracked()),i&&o}var H=function t(){r(this,t),a(this,"state",{}),a(this,"appEntries",{}),a(this,"eventMap",new WeakMap),a(this,"singleEvent",{})},X="dataCollect",z="dataCollectByCookieless";function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie",e="cookieless"!==t?X:z;return window.amStorefrontKit[e]=window.amStorefrontKit[e]||new H}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie",e="cookieless"!==t?X:z,n=window.amStorefrontKit[e];return n}function J(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V,Z=N()?K.shopify:Q()?K.woo:"",tt=U(),et={};function nt(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cookie",o=Y(r);if(o){var i=o.eventMap,a=i.get(t);a||(a={data:[],sentDataLen:-1,sentAppLen:-1},i.set(t,a)),a.eventId||(a.eventId=x());var s=Object.keys(o.state).length;if(a.sentDataLen!==a.data.length||a.sentAppLen!==s){a.sentDataLen=a.data.length,a.sentAppLen=s;var c=ot(a,o);null===(e=window.amStorefrontKit.dataLayer)||void 0===e||e.push([t.type,c]);var u=rt(c);null===(n=o.collector)||void 0===n||n.pushEvent(t.type,u)}}}function rt(t){var e=[],n={};for(var r in t){var o=t[r];if("object"===D(o)){var i=e.length,a=Array.isArray(o);for(var s in e.push(r),o){var c=parseInt(s,10);if(!a||!isNaN(c)&&"".concat(c)===s){var u=void 0,l=void 0;"object"===D(o[s])?(u="".concat(i).concat(s,"+"),l=JSON.stringify(o[s])):(u="".concat(i).concat(s),l=o[s]),n[u]=l}}}else"_"===r[0]?n["-".concat(r)]=o:n[r]=o}return n.km=e.join(","),n}function ot(t,e){var n,r,o,i=M(),a=[],s={},c={},u=J(t.data);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(l.ecommerce&&!c.ecommerce&&(c.ecommerce=l.ecommerce),l.params&&!c.params&&(c.params=l.params),l.page&&!c.page&&(c.page=l.page),l.user_id&&!c.user_id&&(c.user_id=l.user_id),l.promotion){var d=Object.assign({},l.promotion);a.push(d),d.app_name&&(s[d.app_name]=!0)}}}catch(t){u.e(t)}finally{u.f()}if(et.promotions){var g,y=J(et.promotions);try{for(y.s();!(g=y.n()).done;){var b=g.value;b.app_name&&!0!==s[b.app_name]&&a.push(b)}}catch(t){y.e(t)}finally{y.f()}}a.length>0&&(c.promotions=a);var k,S={kit:"3.3",event_time:(k=(new Date).getTime(),"number"==typeof k?k:0),platform:"WEB",user_id:$().userId,session_id:e.collector.getSessionId(),log_id:t.eventId||"",environment:"production",product_code:"automizely",collector:"GTAG",app_connections:{app_platform:Z||et.app_platform||"",app_key:tt||et.app_key||"",app_names:Object.keys(e.state),__organization_id:et.__organization_id||""},page:Object.assign(j({page_referrer:document.referrer,page_location:window.location.href,page_id:e.pageId||"",page_type:null!==(n=null==i?void 0:i.page_type)&&void 0!==n?n:"",page_sn:null!==(r=null==i?void 0:i.page_sn)&&void 0!==r?r:"",utm_source:sessionStorage.getItem(h),utm_medium:sessionStorage.getItem(p),utm_content:sessionStorage.getItem(v),utm_campaign:sessionStorage.getItem(f),_sc_p:sessionStorage.getItem(m)}),c.page)},x=_(w);return x&&(S._am_id=x),delete c.page,Object.assign(S,c)}function it(t){var e;for(e in t)"promotion"===e?t.promotion&&(et.promotions=et.promotions||[],et.promotions.push(t.promotion)):et[e]||(et[e]=t[e])}class at{constructor(){this.listeners=[],this.listener=this.listener.bind(this)}listener(t){const e=[];for(let n of this.listeners){const[r,o]=n;r.call(this,t),o.once||e.push(n)}this.listeners=e}}class st extends EventTarget{constructor(){super(...arguments),this.finalListeners={}}addEventListener(t,e,n){if("object"==typeof n&&n.finally&&e){if("object"==typeof e&&e.handleEvent&&(e=e.handleEvent),"function"==typeof e){let r=this.finalListeners[t];return r?super.removeEventListener(t,r.listener):r=this.finalListeners[t]=new at,r.listeners.push([e,n]),super.addEventListener(t,r.listener)}return}const r=super.addEventListener(t,e,n);return this.finalListeners[t]&&(super.removeEventListener(t,this.finalListeners[t].listener),super.addEventListener(t,this.finalListeners[t].listener)),r}removeEventListener(t,e,n){return super.removeEventListener(t,e,n)}dispatchEvent(t){return super.dispatchEvent(t)}}!function(t){t.page_enter="page_enter",t.page_leave="page_leave",t.node_inserted="node_inserted",t.node_view="node_view",t.view_item="view_item",t.click_item="click_item"}(V||(V={}));class ct extends Event{constructor(t,e){super(t),this.context=e}}class ut extends st{}class lt{constructor(){this.eventTarget=new ut,window.addEventListener("beforeunload",(()=>{this.eventTarget.dispatchEvent(new ct(V.page_leave,{data:null}))}))}}const dt={"2021 BlackFriday Meinekette":".site-nav.site-navigation"},ht=N()?class extends lt{constructor(){var t,e,n;super(),this.isSendViewItem=!1,this.currencyCode=null===(n=null===(e=null===(t=window)||void 0===t?void 0:t.Shopify)||void 0===e?void 0:e.currency)||void 0===n?void 0:n.active,this.eventTarget=new ut,this.caches=new Map,this.queue={page_sn:"",items:[]},this.intersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),{threshold:.7}),this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),T().then((()=>{this.mutationCallback(),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}))}mutationCallback(){var t,e,n,r,o,i,a,s,c,u,l;const d=null===(n=null===(e=null===(t=null===window||void 0===window?void 0:window.amStorefrontKit)||void 0===t?void 0:t.eventData)||void 0===e?void 0:e.ecommerce_item)||void 0===n?void 0:n.byUrl;if(this.queue.page_sn=null!==(o=null===(r=M())||void 0===r?void 0:r.page_sn)&&void 0!==o?o:"",this.queue.page_sn===L.Product&&!this.isSendViewItem){this.isSendViewItem=!0;const{product:t}=null===(a=null===(i=window)||void 0===i?void 0:i.ShopifyAnalytics)||void 0===a?void 0:a.meta,{id:e,variants:n}=t,r=new URLSearchParams(location.search).get("variant"),o=r?parseInt(r,10):void 0;let s=o?n.find((t=>t.id===o)):n[0];s||(s={}),s.quantity=1;const c={item_url:window.location.href,item_name:s.name,item_id:`${e||""}`,price:q(s.price),currency_code:this.currencyCode};this.queue.items.push(c),this.debounceSendEventData()}let h=Array.from(document.querySelectorAll('a[href*="/products/"]'));const p=new RegExp(`^(${window.location.origin}${(null===(s=window.Shopify)||void 0===s?void 0:s.shop)?`|https?://${null===(c=window.Shopify)||void 0===c?void 0:c.shop}`:""}|/products|/collections)\\S+`),v=dt[null===(l=null===(u=null===window||void 0===window?void 0:window.Shopify)||void 0===u?void 0:u.theme)||void 0===l?void 0:l.name];let f=[];if(v&&(f=Array.from(document.querySelectorAll(`${v} a[href*="/products/"]`))),h=h.filter((t=>p.test(t.href)&&!this.caches.has(t.href)&&!f.some((e=>e===t)))),0!==h.length){for(let t of h)this.caches.set(t.href,!1);h.forEach((t=>{t.addEventListener("click",(t=>{const e=Object.assign({},this.queue),n=t.currentTarget.href;e.items=[Object.assign({},null==d?void 0:d[n],{item_url:n.startsWith("/")?window.location.origin+n:n,currency_code:this.currencyCode})];const r=new ct(V.click_item,{data:e});this.eventTarget.dispatchEvent(r)}))})),h.forEach((t=>{this.intersectionObserver.observe(t)}))}}intersectionCallback(t){var e,n,r;const o=null===(r=null===(n=null===(e=null===window||void 0===window?void 0:window.amStorefrontKit)||void 0===e?void 0:e.eventData)||void 0===n?void 0:n.ecommerce_item)||void 0===r?void 0:r.byUrl,i=t.filter((t=>{const e=(t.target.getAttribute("href")||"").split("#");return t.isIntersecting&&!this.caches.get(null==e?void 0:e[0])})).map((t=>{var e;return null===(e=(t.target.getAttribute("href")||"").split("#"))||void 0===e?void 0:e[0]})),a=Array.from(new Set(i)).map((t=>{const e=t.split("?")[0],n=e.replace(window.location.origin,""),r=o&&Object.keys(o).find((t=>t.includes(e)||t.includes(n)));let i=r&&(null==o?void 0:o[r]);return i&&(i.item_id&&(i.item_id=`${i.item_id||""}`),i.price&&(i.price=q(i.price)),i.compare_at_price&&(i.compare_at_price=q(i.compare_at_price))),this.caches.set(t,!0),Object.assign({},i,{currency_code:this.currencyCode,item_url:t.startsWith("/")?window.location.origin+t:t})}));a.length&&(this.queue.items.push(...a),this.debounceSendEventData())}debounceSendEventData(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{const t=new ct(V.view_item,{data:Object.assign({},this.queue)});this.eventTarget.dispatchEvent(t),this.queue.items=[]}),500)}}:lt;var pt,vt,ft;!function(t){t[void 0]="undefined",t.cart="cart",t.add_cart="add_cart",t.checkout="checkouts.json"}(pt||(pt={})),function(t){t.XMLHttpRequest="XMLHttpRequest",t.XDomainRequest="XDomainRequest",t.fetch="fetch"}(vt||(vt={})),function(t){t.respond="respond",t.open="open",t.error="error"}(ft||(ft={}));const mt={errorEventIsReliable:!0};class gt extends Event{constructor(t,e){super(t),this.context=e}}class wt extends st{}function yt(t,e,n){if("function"==typeof t[e]){const r=t[e];t[e]=function(...e){r.apply(t,e),n.apply(t,e)}}else t[e]=n}function _t(){return"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.hRequestEventTarget||(window.amStorefrontKit=window.amStorefrontKit||{},function(t){if(window.XMLHttpRequest){const e=window.XMLHttpRequest.prototype.open;"onerror"in window.XMLHttpRequest.prototype&&"onabort"in window.XMLHttpRequest.prototype&&"ontimeout"in window.XMLHttpRequest.prototype||(mt.errorEventIsReliable=!1),window.XMLHttpRequest.prototype.open=function(...n){const[r,o]=n,i={method:r,url:o,reqFn:vt.XMLHttpRequest};t.dispatchEvent(new gt(ft.open,i));const a=()=>{if(4===this.readyState&&this.status){i.response={type:this.responseType,status:this.status};let e=!1;try{e="string"==typeof this.responseText}catch(t){}if(e)try{i.response.json=JSON.parse(this.responseText)}catch(t){i.response.text=this.responseText}t.dispatchEvent(new gt(ft.respond,i))}},s=e=>{i.error=new Error(`XMLHttpRequest ${e.type}`),t.dispatchEvent(new gt(ft.error,i))};return this.addEventListener?(this.addEventListener("readystatechange",a),this.addEventListener("abort",s),this.addEventListener("error",s),this.addEventListener("timeout",s)):(yt(this,"onreadystatechange",a),yt(this,"onabort",s),yt(this,"onerror",s),yt(this,"ontimeout",s)),e.apply(this,n)}}if(window.fetch){const e=window.fetch.bind(window);window.fetch=function(n,...r){const o=e(n,...r),i={method:"",url:"",reqFn:vt.fetch};return"string"==typeof n?(i.method="GET",i.url=n):(i.method=n.method,i.url=n.url),t.dispatchEvent(new gt(ft.open,i)),o.then((t=>t.clone())).then((t=>(i.response={headers:t.headers,type:t.type,status:t.status},t.text()))).then((e=>{try{i.response.json=JSON.parse(e)}catch(t){i.response.text=e}t.dispatchEvent(new gt(ft.respond,i))})).catch((e=>{i.error=e,t.dispatchEvent(new gt(ft.error,i))})),o}}}(window.amStorefrontKit.hRequestEventTarget=new wt)),window.amStorefrontKit.hRequestEventTarget}var bt,kt;function St(t){return t&&Array.isArray(t.items)}!function(t){t.cart="amStorefrontCart",t.pendingQueue="amPendingQueue"}(bt||(bt={})),function(t){t.cart_updated="cart_updated",t.checkout="checkout",t.purchase="purchase"}(kt||(kt={}));class xt extends Event{constructor(t,e){super(t),this.context=e}}class Et extends st{}var Lt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};const Ct=N()?class{constructor(){this.getCartOpened=!1,this.hReqEventTarget=new wt,this.cachedCart=null,this.checkoutDomCache=[],this.eventTarget=new Et,this.initCartWatch();const t=this.hReqEventTarget=_t();t.addEventListener(ft.open,(t=>{this.getRequestType(t.context.url)===pt.cart&&(this.getCartOpened=!0)})),t.addEventListener(ft.respond,(t=>{var e;switch(this.getRequestType(t.context.url)){case pt.cart:this.getCartOpened=!1,this.cacheCartData(null===(e=t.context.response)||void 0===e?void 0:e.json);break;case pt.add_cart:this.getCart({fromCache:!1})}})),t.addEventListener(ft.error,(t=>{this.getRequestType(t.context.url)===pt.cart&&(this.getCartOpened=!1)})),this.getCartOpened||this.getCart({fromCache:!1})}cacheCartData(t){const e=this.formatCartData(t),n=P(bt.cart);if(function(t,e){var n,r;if(!St(t)&&!St(e))return!1;if(!(null===(n=null==t?void 0:t.items)||void 0===n?void 0:n.length)&&!(null===(r=null==e?void 0:e.items)||void 0===r?void 0:r.length))return!1;if(!St(t)||!St(e)||t.items.length!==e.items.length||t.currency!==e.currency)return!0;const o=t=>t?t.items.map((t=>{const{item_list_name:e}=t,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["item_list_name"]);return Object.assign({},n)})):t;return Object.assign(t,{items:o(t)}),Object.assign(e,{items:o(e)}),JSON.stringify(t)!==JSON.stringify(e)}(n,e)){this.cachedCart=e,e?I(bt.cart,e):R(bt.cart),null==e||e.items.forEach((t=>{t.is_updated=!(null==n?void 0:n.items.some((e=>e.item_id===t.item_id&&t.item_variant_id===e.item_variant_id&&t.quantity===e.quantity)))}));const t={data:e};this.eventTarget.dispatchEvent(new xt(kt.cart_updated,t))}}getRequestType(t){return/^(\/cart\.js|\/cart\/(change|update|clear)(\.js)?)($|\?)/.test(t)?pt.cart:/^(\/cart\/add(\.js)?)($|\?)/.test(t)?pt.add_cart:/^(\/wallets\/checkouts(\.json)?)($|\?)/.test(t)?pt.checkout:pt.undefined}formatCartData(t){return St(t)?{currency:t.currency,token:t.token,items:t.items.map(((e,n)=>{const r=this.formatItemData(e,n);return r&&Object.assign(r,{currencyCode:t.currency}),r}))}:null}formatItemData(t,e){var n,r,o,i;return(i=t)&&"number"==typeof(null==i?void 0:i.product_id)?{item_name:t.product_title||"",item_id:`${t.product_id||""}`,item_variant_id:`${t.variant_id||""}`,quantity:t.quantity,price:q(t.price),currency_code:(null===(o=null===(r=null===(n=window)||void 0===n?void 0:n.Shopify)||void 0===r?void 0:r.currency)||void 0===o?void 0:o.active)||"",item_brand:t.vendor||"",item_category:"",item_list_name:window.document.title||"",idx:void 0!==e?e+1:0,item_url:t.url}:null}getCart(t){return(null==t?void 0:t.fromCache)?Promise.resolve(P(bt.cart)):(this.getCartOpened||(e=C.cart,n={body:void 0},window.fetch(e,n)),new Promise(((t,e)=>{const n=()=>{this.hReqEventTarget.removeEventListener(ft.error,r),t(this.cachedCart)},r=t=>{this.hReqEventTarget.removeEventListener(ft.respond,n),e(t.context.error)};this.hReqEventTarget.addEventListener(ft.respond,n,{once:!0}),this.hReqEventTarget.addEventListener(ft.error,r,{once:!0})})));var e,n}initCartWatch(){return Lt(this,void 0,void 0,(function*(){yield T();const t=M();(null==t?void 0:t.page_sn)===L.ThankYou&&this.thankYouCheckout(),this.buyItNowCheckout(),this.cartCheckout(),this.watchCartForm().then((()=>{this.cartCheckout()}))}))}thankYouCheckout(){var t;return Lt(this,void 0,void 0,(function*(){const{customer_id:e,order_id:n,total_price:r,total_tax:o,shipping_rate:i,currency:a,discount:s,line_items:c,token:u}=(null===(t=null===window||void 0===window?void 0:window.Shopify)||void 0===t?void 0:t.checkout)||{},{price:l}=i||{},d={order_id:n,total_value:Math.round(100*r),total_tax:Math.round(100*o),total_shipping:Math.round(100*l),currency_code:a,items:[],user_id:e,token:u};if(s){const{code:t,rate:e,amount:n}=s;d.coupon={coupon_code:t,discount_rate:e,discount_amount:Math.round(100*n)}}d.items=null==c?void 0:c.map((t=>({item_name:t.title,item_id:`${t.product_id||""}`,price:Math.round(100*t.compare_at_price),pay_value:Math.round(100*t.price),item_brand:t.vendor,item_variant_id:t.variant_id,quantity:t.quantity})));const h=new xt(kt.purchase,{data:d});this.eventTarget.dispatchEvent(h)}))}dispatchCheckoutEvent(t){return Lt(this,void 0,void 0,(function*(){const e=yield this.getCart({fromCache:!0});e&&this.updateQueue(kt.checkout,{data:e});const n=new xt(kt.checkout,{data:e});t&&Object.defineProperty(n,"target",{value:t,enumerable:!0}),this.eventTarget.dispatchEvent(n)}))}cartCheckout(){let t=[],e=Array.from(document.querySelectorAll('[name="checkout"][type="submit"],form[action^="/checkout"] [type="submit"]'));e=e.filter((t=>"add"!==t.getAttribute("name"))),e.length&&t.push(...e);const n=document.querySelectorAll('a[href^="/checkout"]');return n.length&&t.push(...n),t=t.filter((t=>!this.checkoutDomCache.some((e=>t===e)))),this.checkoutDomCache.push(...e),t.map((t=>{t.addEventListener("click",this.dispatchCheckoutEvent.bind(this,t),!0)})),t.length}buyItNowCheckout(){Promise.all([this.buyItNowClick(),this.buyItNowToken()]).then((([t,e])=>{t.data.token=e,this.updateQueue(kt.checkout,{data:t.data});const n=new xt(kt.checkout,{data:t.data});t.target&&Object.defineProperty(n,"target",{value:t.target,enumerable:!0}),this.eventTarget.dispatchEvent(n)}))}buyItNowToken(){return new Promise((t=>{(this.hReqEventTarget=_t()).addEventListener(ft.respond,(e=>{var n,r,o,i;if(this.getRequestType(e.context.url)===pt.checkout){const a=null!==(i=null===(o=null===(r=null===(n=e.context.response)||void 0===n?void 0:n.headers)||void 0===r?void 0:r.get("location"))||void 0===o?void 0:o.replace(/\S*\/(\S*).json/,"$1"))&&void 0!==i?i:"";t(a)}}))}))}buyItNowClick(){return new Promise((t=>{const e=Array.from(document.querySelectorAll('[data-testid=Checkout-button],[data-checkout="checkout"]')).filter((t=>!this.checkoutDomCache.some((e=>e===t))));this.checkoutDomCache.push(...e),null==e||e.map((e=>{e.addEventListener("click",(()=>{var n,r;const{currency:o,product:i}=null===(r=null===(n=window)||void 0===n?void 0:n.ShopifyAnalytics)||void 0===r?void 0:r.meta,{id:a,variants:s}=i||{},c=new URLSearchParams(location.search).get("variant"),u=c?parseInt(c,10):void 0;let l=u?null==s?void 0:s.find((t=>t.id===u)):null==s?void 0:s[0];l||(l={}),l.quantity=1;const d={token:"",currency:o,items:[{item_name:l.name,item_id:`${a||""}`,price:q(l.price),currency_code:o,item_variant_id:l.id,quantity:l.quantity}]};t({data:d,target:e})}),!0)}))}))}updateQueue(t,e){const n=P(bt.pendingQueue)||[];n.push({event:t,data:e}),I(bt.pendingQueue,n)}watchCartForm(){return new Promise((t=>{const e=()=>{this.buyItNowCheckout();let t=Array.from(document.querySelectorAll("form[action^='/cart'],form[action^='/checkout']")).filter((t=>/^\/cart$|^\/cart\?\S*/.test(t.getAttribute("action")||"")||/^\/checkout$|^\/checkout\?\S*/.test(t.getAttribute("action")||"")));for(let e of t)n.observe(e)},n=new IntersectionObserver((e=>{e.some((t=>t.isIntersecting))&&t(!0)}),{threshold:.3}),r=new MutationObserver(e);e(),r.observe(document.body,{childList:!0,subtree:!0,attributes:!0})}))}}:class{constructor(){this.eventTarget=new Et}getRequestType(t){return pt.undefined}getCart(t){return Promise.resolve({items:[]})}};function Ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cookie",r=Y(n);if(!r)throw new Error("Should call initDataCollect() first.");var o=r.eventMap,i=o.get(t);i||(i={data:[],sentDataLen:-1,sentAppLen:-1},o.set(t,i)),i.data.push(Object.assign({},e))}function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qt={_:"ep",event_time:"epn"},It=function(){function t(e){var n=this;r(this,t),a(this,"maxDataQueueCount",10),a(this,"maxDataQueueSize",16e3),a(this,"flushIntervalMs",1250),a(this,"userPseudoId",void 0),a(this,"options",void 0),a(this,"maxQueryDataLength",void 0),a(this,"dataQueue",[]),a(this,"dataQueueSize",0),a(this,"reqBase",void 0),a(this,"reqProductShortCode",""),a(this,"flushing",!1),this.options=e,this.userPseudoId=this.isCookieless?null:function(){const t=function(){const t=_("_ga");let e=t.indexOf(".");if(e>-1&&(e=t.indexOf(".",e+1),e>-1)){const n=t.substring(e+1);return n.length>=12?n:""}return""}()||_(g)||x();return b(g,t,{path:y,maxAge:31536e3}),t}(),this.reqBase=this.generateReqBase(e.userTrackingMechanism),this.maxQueryDataLength=2048-this.reqBase.length-1,this.activeQueue(),this.flush=this.flush.bind(this),window.addEventListener("pagehide",this.flush),setTimeout((function(){window.addEventListener("beforeunload",n.flush)}))}return i(t,[{key:"isCookieless",get:function(){return"cookieless"===this.options.userTrackingMechanism}},{key:"activeQueue",value:function(){var t=this;setTimeout((function(){t.flush(),t.activeQueue()}),this.flushIntervalMs)}},{key:"queueAvailable",value:function(){return!!navigator.sendBeacon}},{key:"pushEvent",value:function(t,e){var n=this.gtmFlattenData(t,e);this.setProductShortCodeList(),this.queueAvailable()?(this.dataQueue.push(n),this.dataQueueSize+=n.length,(this.dataQueue.length>=this.maxDataQueueCount||this.dataQueueSize>=this.maxDataQueueSize)&&this.flush()):this.sendNow(n)}},{key:"flush",value:function(){if(!this.flushing&&0!==this.dataQueue.length){this.flushing=!0;var t=this.dataQueue;this.dataQueue=[],this.dataQueueSize=0,this.flushing=!1,this.sendBatch(t)}}},{key:"getReqUrl",value:function(){return"".concat(this.reqBase).concat(this.reqProductShortCode)}},{key:"sendNow",value:function(t){if(t.length<=this.maxQueryDataLength)new Image(1,1).src="".concat(this.getReqUrl(),"&").concat(t);else{var e=new window.XMLHttpRequest;e.withCredentials=!0,e.open("POST",this.getReqUrl()),e.send(t)}}},{key:"sendBatch",value:function(t){navigator.sendBeacon(this.getReqUrl(),t.join("\r\n"))}},{key:"setProductShortCodeList",value:function(){var t=[];for(var e in this.options.state)this.options.state[e].shortCode&&t.push(this.options.state[e].shortCode);t.sort(),this.maxQueryDataLength+=this.reqProductShortCode.length,this.reqProductShortCode="&_psc=".concat(t.join(",")),this.maxQueryDataLength-=this.reqProductShortCode.length}},{key:"getSessionId",value:function(){return this.isCookieless?O(l,{expires:!1}):O(u)}},{key:"generateReqBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie",n={cookie:"https://www.automizely-analytics.com/analytics/collect",cookieless:"https://www.automizely-analytics.com/cookieless/collect"},r=n[e]+"?"+t.flattenData(this.gtmCommonData());return r}},{key:"gtmCommonData",value:function(){var e=t.getCommonData(this.options.userTrackingMechanism);return jt(jt({v:"2",gtm:"amwcp1",sr:e.screenResolution,ul:e.language},this.userPseudoId?{cid:this.userPseudoId}:void 0),{},{dl:e.pageLocation,dr:e.pageReferrer,dt:e.pageTitle,sid:e.sessionId})}},{key:"gtmFlattenData",value:function(t,e){var n="en=".concat(encodeURIComponent(t));for(var r in e)n+="&".concat(qt[r]||qt._,".").concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r]));return n}}],[{key:"getCommonData",value:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cookie";return n="cookieless"===r?O(l,{expires:!1}):O(u),{pageLocation:location.href,pageReferrer:document.referrer,pageTitle:document.title,screenResolution:"".concat((null===(t=window.screen)||void 0===t?void 0:t.width)||0,"x").concat((null===(e=window.screen)||void 0===e?void 0:e.height)||0),language:navigator.language||"",sessionId:n}}},{key:"flattenData",value:function(t){var e="";for(var n in t)e+=(e?"&":"")+"".concat(n,"=").concat(encodeURIComponent(t[n]));return e}}]),t}();function Pt(t){var e;t.pageId||(t.pageId="".concat((e=new Date,e.getSeconds()+60*e.getMinutes()+3600*e.getHours()),".").concat(function(t){let e=`${E(1,9)}`;for(let t=1;t<8;t++)e+=E(0,9);return e}()))}var Rt=function(){function t(){r(this,t),a(this,"cartEventTarget",void 0),a(this,"viewEventTarget",void 0)}return i(t,[{key:"cart",get:function(){return this.cartEventTarget||(this.cartEventTarget=(window.amStorefrontKit=window.amStorefrontKit||{},"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.cart?window.amStorefrontKit.cart:window.amStorefrontKit.cart=new Ct).eventTarget)}},{key:"view",get:function(){return this.viewEventTarget||(this.viewEventTarget=(window.amStorefrontKit=window.amStorefrontKit||{},"object"==typeof window.amStorefrontKit&&window.amStorefrontKit.view?window.amStorefrontKit.view:window.amStorefrontKit.view=new ht).eventTarget)}}]),t}();function Dt(){return{eventTarget:new Rt,pushData:Ot}}function At(){return At=e(c().mark((function t(e,n,r){var o,i,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.amStorefrontKit=window.amStorefrontKit||{},o=U(),!["kadensse","bad-no"].includes(o)){t.next=6;break}return k(w,{path:y}),k(g,{path:y}),t.abrupt("return");case 6:return t.next=8,T();case 8:if(!1===(null==r?void 0:r.requiresUserConsent)){t.next=21;break}return i=!1,t.prev=10,t.next=13,B();case 13:i=t.sent,t.next=18;break;case 16:t.prev=16,t.t0=t.catch(10);case 18:if(i){t.next=21;break}return window.amStorefrontKit.collect=function(){},t.abrupt("return");case 21:if(window.amStorefrontKit.dataLayer=[],(a=G(null==r?void 0:r.mode)).state[e]={shortCode:(null==r?void 0:r.productShortCode)||""},a.collector=a.collector||new It({gaMeasurementId:"G-S8VXCC5E20",state:a.state,userTrackingMechanism:null==r?void 0:r.mode}),s="".concat(e,".").concat((null==r?void 0:r.entry)||""),a.appEntries=a.appEntries||{},!a.appEntries.hasOwnProperty(s)){t.next=29;break}return t.abrupt("return");case 29:a.appEntries[s]=1,Pt(a),Kt(),u=Dt(),(null==r?void 0:r.basicData)&&it(r.basicData),(null==r?void 0:r.mappedOrgId)&&it({__organization_id:r.mappedOrgId}),a.singleEvent.pageEnter||(a.singleEvent.pageEnter=new ct(V.page_enter),Mt(u,a,null==r?void 0:r.mode),$t(u)),n&&n(u),u.eventTarget.view.addEventListener(V.page_enter,(function(t){nt(t,null==r?void 0:r.mode)}),{finally:!0,once:!0}),u.eventTarget.view.dispatchEvent(a.singleEvent.pageEnter);case 39:case"end":return t.stop()}}),t,null,[[10,16]])}))),At.apply(this,arguments)}function Mt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cookie";t.eventTarget.view.addEventListener(V.page_leave,(function(t){nt(t,n)})),t.eventTarget.view.addEventListener(S.view_item,(function(t){var e,r;null!=t&&null!==(e=t.context)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.items&&Ot(t,{ecommerce:{items:t.context.data.items}},n),nt(t,n)})),t.eventTarget.view.addEventListener(S.click_item,(function(t){var e,r;null!=t&&null!==(e=t.context)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.items&&Ot(t,{ecommerce:{items:t.context.data.items}},n),nt(t,n)})),t.eventTarget.cart.addEventListener(S.checkout,(function(t){var e,r=null==t||null===(e=t.context)||void 0===e?void 0:e.data;r&&Ot(t,{ecommerce:j({checkout_token:r.token,items:r.items})},n),nt(t,n)})),t.eventTarget.cart.addEventListener(S.purchase,(function(t){var r;t&&(e.singleEvent.purchase=t);var o=null==t||null===(r=t.context)||void 0===r?void 0:r.data;o&&Ot(t,{user_id:o.user_id,ecommerce:j({order_id:o.order_id,total_value:o.total_value,total_tax:o.total_tax,total_shipping:o.total_shipping,currency_code:o.currency_code,checkout_token:o.token,coupon:o.coupon,items:o.items})},n),nt(t,n)})),t.eventTarget.cart.addEventListener(S.cart_updated,(function(t){var e,r=null==t||null===(e=t.context)||void 0===e?void 0:e.data;r&&Ot(t,{ecommerce:j({cart_token:r.token,carts:r.items})},n),nt(t,n)}))}function $t(t){(P(bt.pendingQueue)||[]).forEach((function(e){var n=new xt(e.event,e.data);t.eventTarget.cart.dispatchEvent(n)})),R(bt.pendingQueue)}function Kt(){var t=new URLSearchParams(location.search),e=t.get("utm_source"),n=t.get("utm_medium"),r=t.get("utm_content"),o=t.get("utm_campaign"),i=t.get("_sc_p");e&&sessionStorage.setItem(h,e),n&&sessionStorage.setItem(p,n),r&&sessionStorage.setItem(v,r),o&&sessionStorage.setItem(f,o),i&&function(t){sessionStorage.setItem(m,t);var e=t.split("*").reduce((function(t,e){var n=e.split(":");return t[n[0]]=n[1],t}),{});e.lid&&b(w,e.lid,{path:y,maxAge:7884e3})}(i)}var Nt=function(t){return function(e,n){var r,o=Y(t);if(!o)throw new Error("Should call initDataCollect() first.");for(var i=0,a=Object.values(o.singleEvent);i<a.length;i++){var s=a[i];if((null==s?void 0:s.type)===e){r=s;break}}var c=r||("string"==typeof e?new Event(e):e);n&&Ot(c,n,t),nt(c,t)}},Qt=Nt("cookie"),Ut=Nt("cookieless");window.amStorefrontKit=window.amStorefrontKit||{},window.amStorefrontKit.collect=Qt,window.amStorefrontKit.collectByCookieless=Ut,window.amStorefrontKit.initCollect=function(t,e,n){return At.apply(this,arguments)}})()})();